{% extends "base.html" %}
{% block title %}予約一覧{% endblock %}
{% block content %}
  <h1>予約一覧</h1>

  <div class="tabs">
    <a class="tab {% if tab != 'past' %}active{% endif %}" href="{% url 'club:reservation_list' %}?tab=future">未来</a>
    <a class="tab {% if tab == 'past' %}active{% endif %}" href="{% url 'club:reservation_list' %}?tab=past">過去</a>
  </div>

  {% if reservations %}
    <div class="grid">
      {% for r in reservations %}
        <div class="card">
          <div style="display:flex; justify-content:space-between; gap:12px; align-items:center;">
            <div>
              <b>{{ r.court }}</b><br>
              {{ r.date }} {{ r.start_time }} - {{ r.end_time }}
              {% if r.status == "cancelled" %}
                <span class="pill" style="opacity:.7;">キャンセル済み</span>
              {% else %}
                <span class="pill">予約中</span>
              {% endif %}
            </div>

            {% if r.status == "booked" %}
              <form method="post" action="{% url 'club:reservation_cancel' r.pk %}">
                {% csrf_token %}
                <button class="btn btn-danger" type="submit">キャンセル</button>
              </form>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="muted">予約はありません。</p>
  {% endif %}
{% endblock %}
